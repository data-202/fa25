{
  "hash": "e0768067cd07ea94e9e6a7c796d40752",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"DATA 202 - Bivariate analysis\"\nauthor: \"FirstName LastName\"\ndate: \"Week 6\"\noutput: html_document\neditor_options:\n    chunk_output_type: console\n---\n\n\n\n\n\n\n# Libraries and packages\n\nLoad the libraries we needed. Be sure to `install.packages()` where needed.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n:::\n\n\n\n\n# Bivariate analysis\n\nThere are multiple options when conducting a bivariate analysis. In this file, I provide some very basic code to help you get started on your analysis for your paper.\n\n## Load the data from github\n\nWe'll use data on the gender pay gap that I have prepared for today's discussion.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npay_gap_data <- read.csv(\"https://raw.githubusercontent.com/data-202/sp25/refs/heads/master/data/pay_data.csv\")\n```\n:::\n\n\n\n\n# Numeric variables\n\n## Research question\n\nRQ: What is the relationship between years of experience and annual salary?\n\n### Scatterplot\n\nWe'll start with a scatterplot to visualize the data.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Let's visualize the dat a\nggplot(pay_gap_data, aes(x = years_experience, y = annual_salary, color = gender)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(title = \"Years of Experience vs Annual Salary by Gender\",\n       x = \"Years of Experience\", y = \"Annual Salary\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](bivariate_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n### Correlation\n\nWe'll then conduct a correlation analysis.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(pay_gap_data$years_experience, pay_gap_data$annual_salary)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's product-moment correlation\n\ndata:  pay_gap_data$years_experience and pay_gap_data$annual_salary\nt = 15.413, df = 98, p-value < 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.7726828 0.8906291\nsample estimates:\n      cor \n0.8414022 \n```\n\n\n:::\n:::\n\n\n\n\n\n### Simple linear regression\n\nGiven the nature of our variables, we can run a simple linear regression.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel <- lm(annual_salary ~ years_experience, data = pay_gap_data)\n```\n:::\n\n\n\n\nWe then want to call a summary of our model.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = annual_salary ~ years_experience, data = pay_gap_data)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-18654.6  -6516.7    -72.8   6192.4  24311.7 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)       45733.6     1765.1   25.91   <2e-16 ***\nyears_experience   1932.6      125.4   15.41   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 9339 on 98 degrees of freedom\nMultiple R-squared:  0.708,\tAdjusted R-squared:  0.705 \nF-statistic: 237.6 on 1 and 98 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n\n\n\nIn a future class session, we'll talk about model specifications and how to apply the tenets of critical quantification. For now, please focus on the code a nd syntax to help you get practice.\n\n# Categorical Variables\n\nGiven the categorical variables, we will conduct slightly different tests.\n\n## Research question\n\nRQ: Is there an association between gender and job title?\n\n### Contingency Table: Gender vs Job Title\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pay_gap_data$gender, pay_gap_data$job_title)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n            \n             Biologist Chemist Data Scientist Other Software Engineer\n  Female             8       7              6    10                 6\n  Male              10      12             13    12                 9\n  Non-binary         2       0              0     1                 4\n```\n\n\n:::\n:::\n\n\n\n\n\n### Chi-square test for independence\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchisq.test(pay_gap_data$gender, pay_gap_data$job_title)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in chisq.test(pay_gap_data$gender, pay_gap_data$job_title): Chi-squared\napproximation may be incorrect\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's Chi-squared test\n\ndata:  pay_gap_data$gender and pay_gap_data$job_title\nX-squared = 10.259, df = 8, p-value = 0.2473\n```\n\n\n:::\n:::\n\n\n\n\n### Boxplot: Annual Salary by Gender\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pay_gap_data, aes(x = gender, y = annual_salary, fill = gender)) +\n  geom_boxplot() +\n  labs(title = \"Annual Salary Distribution by Gender\",\n       x = \"Gender\", y = \"Annual Salary\")\n```\n\n::: {.cell-output-display}\n![](bivariate_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n\n# Differences by groupings\n\nWhen we mix multiple types of variables, recall that there are additional tests that we can use.\n\n## Research Question\n### ANOVA: Annual salary differences among genders\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nanova_result <- aov(annual_salary ~ gender, data = pay_gap_data)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(anova_result)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n            Df    Sum Sq   Mean Sq F value   Pr(>F)    \ngender       2 5.462e+09 2.731e+09   11.13 4.46e-05 ***\nResiduals   97 2.380e+10 2.454e+08                     \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n\n\n:::\n:::\n\n\n\n\n### t-test: Salary difference between two genders (e.g., Male vs Female)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(annual_salary ~ gender, data = pay_gap_data[pay_gap_data$gender %in% c(\"Male\", \"Female\"),])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tWelch Two Sample t-test\n\ndata:  annual_salary by gender\nt = -4.7815, df = 84.835, p-value = 7.246e-06\nalternative hypothesis: true difference in means between group Female and group Male is not equal to 0\n95 percent confidence interval:\n -21961.12  -9061.08\nsample estimates:\nmean in group Female   mean in group Male \n            59756.76             75267.86 \n```\n\n\n:::\n:::\n\n\n\n\n### Multiple linear regression: Salary vs experience and Gender\n\nWe can also do a multiple linear regression model.\n\nMore on this soon.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmulti_model <- lm(annual_salary ~ years_experience + gender, data = pay_gap_data)\n```\n:::\n\n\n\n\nThen we call a summary of our model.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(multi_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = annual_salary ~ years_experience + gender, data = pay_gap_data)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-12628.5  -4703.1   -528.8   3620.1  19084.8 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)       38180.5     1521.7  25.091  < 2e-16 ***\nyears_experience   1878.4       90.8  20.688  < 2e-16 ***\ngenderMale        13724.7     1430.6   9.594 1.11e-15 ***\ngenderNon-binary   7346.5     2779.7   2.643   0.0096 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6740 on 96 degrees of freedom\nMultiple R-squared:  0.851,\tAdjusted R-squared:  0.8463 \nF-statistic: 182.7 on 3 and 96 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n",
    "supporting": [
      "bivariate_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}